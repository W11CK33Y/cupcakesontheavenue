<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover"/>
<title>Cupcakes on the Avenue - Premium Baked Goods & Custom Cakes | Highworth Market</title>
<meta name="description" content="Artisan cupcakes, custom celebration cakes & exclusive Shortbread Delights. Visit us at Highworth Market Saturdays or order online. Fresh baked goods made with love.">
<meta name="keywords" content="cupcakes, cakes, bakery, Highworth, custom cakes, shortbread, celebration cakes, fresh baked goods, artisan bakery">
<meta name="author" content="Cupcakes on the Avenue">
<meta name="robots" content="index, follow">

<!-- PWA Meta Tags -->
<meta name="theme-color" content="#667eea">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Cupcakes Avenue">
<meta name="mobile-web-app-capable" content="yes">
<meta name="format-detection" content="telephone=no">

<!-- Web App Manifest -->
<link rel="manifest" href="manifest.json">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üßÅ</text></svg>">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://cupcakesontheavenue.co.uk">
<meta property="og:title" content="Cupcakes on the Avenue - Premium Baked Goods & Custom Cakes">
<meta property="og:description" content="Artisan cupcakes, custom celebration cakes & exclusive Shortbread Delights. Visit us at Highworth Market or order online.">
<meta property="og:image" content="https://cupcakesontheavenue.co.uk/pictures/logo.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://cupcakesontheavenue.co.uk">
<meta property="twitter:title" content="Cupcakes on the Avenue - Premium Baked Goods & Custom Cakes">
<meta property="twitter:description" content="Artisan cupcakes, custom celebration cakes & exclusive Shortbread Delights. Visit us at Highworth Market or order online.">
<meta property="twitter:image" content="https://cupcakesontheavenue.co.uk/pictures/logo.png">

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Bakery",
  "name": "Cupcakes on the Avenue",
  "description": "Artisan bakery specializing in cupcakes, custom celebration cakes, and exclusive Shortbread Delights",
  "url": "https://cupcakesontheavenue.co.uk",
  "telephone": "07842817789",
  "email": "cupcakesontheavenue@gmail.com",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Highworth",
    "addressCountry": "UK"
  },
  "openingHours": "Sa 08:00-14:00",
  "paymentAccepted": "Cash, Card, Online Payment",
  "priceRange": "¬£3-¬£70",
  "servesCuisine": "Bakery",
  "hasMenu": {
    "@type": "Menu",
    "hasMenuSection": [
      {
        "@type": "MenuSection",
        "name": "Regular Bakes",
        "hasMenuItem": [
          {
            "@type": "MenuItem",
            "name": "Shortbread Delight",
            "description": "Our signature buttery, melt-in-your-mouth shortbread",
            "offers": {
              "@type": "Offer",
              "price": "20-30",
              "priceCurrency": "GBP"
            }
          }
        ]
      }
    ]
  }
}
</script>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
  
  // Custom events for tracking
  function trackPurchase(orderTotal, items) {
    gtag('event', 'purchase', {
      transaction_id: Math.random().toString(36).substr(2, 9),
      value: orderTotal,
      currency: 'GBP',
      items: items.map(item => ({
        item_id: item.name.toLowerCase().replace(/\s+/g, '_'),
        item_name: item.name,
        category: 'Baked Goods',
        quantity: item.quantity,
        price: item.price
      }))
    });
  }
  
  function trackProductView(productName) {
    gtag('event', 'view_item', {
      currency: 'GBP',
      value: 0,
      items: [{
        item_id: productName.toLowerCase().replace(/\s+/g, '_'),
        item_name: productName,
        category: 'Baked Goods',
        quantity: 1
      }]
    });
  }
  
  function trackAddToCart(productName, price) {
    gtag('event', 'add_to_cart', {
      currency: 'GBP',
      value: price,
      items: [{
        item_id: productName.toLowerCase().replace(/\s+/g, '_'),
        item_name: productName,
        category: 'Baked Goods',
        quantity: 1,
        price: price
      }]
    });
  }
</script>

<link rel="icon" type="image/x-icon" href="pictures/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="pictures/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="pictures/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="pictures/apple-touch-icon.png">
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  color: #333;
  transition: background 1s ease-in-out;
}

/* Seasonal Theme Variables */
body.spring {
  background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);
}

body.summer {
  background: linear-gradient(135deg, #FFE135 0%, #FFA500 100%);
}

body.autumn {
  background: linear-gradient(135deg, #FF6B35 0%, #8B4513 100%);
}

body.winter {
  background: linear-gradient(135deg, #B0E0E6 0%, #4682B4 100%);
}

/* Header */
header {
  background: rgba(255, 255, 255, 0.95);
  padding: 20px;
  text-align: center;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

header h1 {
  color: #667eea;
  font-size: 2.5rem;
  margin-bottom: 10px;
}

header p {
  color: #666;
  font-size: 1.1rem;
  margin-bottom: 15px;
}

nav a {
  color: #667eea;
  text-decoration: none;
  margin: 0 15px;
  font-weight: 600;
  transition: color 0.3s;
}

nav a:hover {
  color: #764ba2;
}

/* Hero */
.hero {
  text-align: center;
  padding: 60px 20px;
  color: white;
}

.hero img {
  max-width: 300px;
  border-radius: 15px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  margin-bottom: 20px;
}

.hero h2 {
  font-size: 2.5rem;
  margin-bottom: 10px;
}

.hero p {
  font-size: 1.3rem;
  opacity: 0.9;
}

/* Sections */
section {
  max-width: 1400px;
  margin: 40px auto;
  padding: 40px 20px;
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(15px);
  border-radius: 25px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.15), 0 5px 15px rgba(0,0,0,0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  color: #2c3e50;
}

section p, section li, section label {
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.7);
}

section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

section:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.18), 0 10px 20px rgba(0,0,0,0.12);
  background: rgba(255, 255, 255, 0.35);
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

/* Seasonal Section Adaptations */
body.spring section {
  background: rgba(255, 255, 255, 0.20);
  border: 1px solid rgba(144, 238, 144, 0.25);
  box-shadow: 0 15px 35px rgba(50, 205, 50, 0.12), 0 5px 15px rgba(50, 205, 50, 0.06);
}

body.spring section::before {
  background: linear-gradient(90deg, #90EE90, #32CD32, #90EE90);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

body.summer section {
  background: rgba(255, 255, 255, 0.20);
  border: 1px solid rgba(255, 225, 53, 0.25);
  box-shadow: 0 15px 35px rgba(255, 165, 0, 0.12), 0 5px 15px rgba(255, 165, 0, 0.06);
}

body.summer section::before {
  background: linear-gradient(90deg, #FFE135, #FFA500, #FFE135);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

body.autumn section {
  background: rgba(255, 255, 255, 0.20);
  border: 1px solid rgba(255, 107, 53, 0.25);
  box-shadow: 0 15px 35px rgba(255, 107, 53, 0.12), 0 5px 15px rgba(255, 107, 53, 0.06);
}

body.autumn section::before {
  background: linear-gradient(90deg, #FF6B35, #8B4513, #FF6B35);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

body.winter section {
  background: rgba(255, 255, 255, 0.20);
  border: 1px solid rgba(176, 224, 230, 0.25);
  box-shadow: 0 15px 35px rgba(70, 130, 180, 0.12), 0 5px 15px rgba(70, 130, 180, 0.06);
}

body.winter section::before {
  background: linear-gradient(90deg, #B0E0E6, #4682B4, #B0E0E6);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

/* Floating Particle Effect for Sections */
section::after {
  content: '';
  position: absolute;
  top: 10px;
  right: 20px;
  width: 6px;
  height: 6px;
  background: rgba(102, 126, 234, 0.3);
  border-radius: 50%;
  animation: float 4s ease-in-out infinite;
}

@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
  50% { transform: translateY(-10px) rotate(180deg); opacity: 0.7; }
}

/* Enhanced Glass Effect on Hover */
section:hover {
  background: rgba(255, 255, 255, 0.35);
  backdrop-filter: blur(20px);
}

/* Seasonal Particle Colors */
body.spring section::after {
  background: rgba(50, 205, 50, 0.4);
}

body.summer section::after {
  background: rgba(255, 165, 0, 0.4);
}

body.autumn section::after {
  background: rgba(255, 107, 53, 0.4);
}

body.winter section::after {
  background: rgba(70, 130, 180, 0.4);
}

section h2 {
  text-align: center;
  font-size: 2.5rem;
  color: #667eea;
  margin-bottom: 40px;
  text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
  font-weight: 700;
}

/* Product Tiles */
.products-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 30px;
}

.product-tile {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 20px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
  position: relative;
  height: 350px;
  border: 2px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.product-tile::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
  transform: translateX(-100%);
  transition: transform 0.6s;
}

.product-tile:hover::before {
  transform: translateX(100%);
}

.product-tile:hover {
  transform: translateY(-15px) scale(1.02);
  box-shadow: 0 20px 50px rgba(102, 126, 234, 0.3);
  border-color: rgba(255, 255, 255, 0.4);
}

/* Seasonal Product Tile Styles */
body.spring .product-tile {
  background: linear-gradient(135deg, #90EE90 0%, #32CD32 100%);
}

body.spring .product-tile:hover {
  box-shadow: 0 20px 50px rgba(50, 205, 50, 0.3);
}

body.summer .product-tile {
  background: linear-gradient(135deg, #FFE135 0%, #FFA500 100%);
}

body.summer .product-tile:hover {
  box-shadow: 0 20px 50px rgba(255, 165, 0, 0.3);
}

body.autumn .product-tile {
  background: linear-gradient(135deg, #FF6B35 0%, #8B4513 100%);
}

body.autumn .product-tile:hover {
  box-shadow: 0 20px 50px rgba(255, 107, 53, 0.3);
}

body.winter .product-tile {
  background: linear-gradient(135deg, #B0E0E6 0%, #4682B4 100%);
}

body.winter .product-tile:hover {
  box-shadow: 0 20px 50px rgba(70, 130, 180, 0.3);
}

.product-tile img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.product-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.95);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 25px;
  opacity: 0;
  transition: opacity 0.3s;
}

.product-tile:hover .product-overlay {
  opacity: 1;
}

.product-title {
  font-size: 1.5rem;
  font-weight: bold;
  color: #667eea;
  margin-bottom: 10px;
}

.product-description {
  color: #666;
  font-size: 1rem;
  line-height: 1.5;
  flex: 1;
}

.product-select {
  width: 100%;
  padding: 12px;
  border: 2px solid #667eea;
  border-radius: 8px;
  font-size: 1rem;
  margin-bottom: 10px;
  background: white;
}

.add-btn {
  width: 100%;
  padding: 14px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s;
}

.add-btn:hover {
  transform: scale(1.05);
}

/* Size Comparison Tooltip */
.size-tooltip {
  position: absolute;
  background: #333;
  color: white;
  padding: 15px;
  border-radius: 8px;
  font-size: 0.9rem;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s;
  max-width: 200px;
}

.size-tooltip.show {
  opacity: 1;
}

.size-visual {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 8px;
}

.size-circle {
  background: #667eea;
  border-radius: 50%;
  display: inline-block;
}

.size-6 { width: 20px; height: 20px; }
.size-8 { width: 26px; height: 26px; }
.size-10 { width: 32px; height: 32px; }

/* Cart */
.cart-section {
  max-width: 800px;
  margin: 40px auto;
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(15px);
  border-radius: 25px;
  padding: 35px;
  box-shadow: 0 15px 35px rgba(0,0,0,0.15), 0 5px 15px rgba(0,0,0,0.08);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.cart-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

.cart-section:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 10px 20px rgba(0,0,0,0.1);
}

.cart-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
  padding-bottom: 20px;
  border-bottom: 2px solid #f0f0f0;
}

.cart-header h2 {
  color: #667eea;
  margin: 0;
}

#itemCount {
  background: #667eea;
  color: white;
  padding: 8px 15px;
  border-radius: 20px;
  font-weight: bold;
}

.cart-items ul {
  list-style: none;
}

.cart-items li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  margin-bottom: 10px;
  background: #f8f9fa;
  border-radius: 10px;
}

.cart-controls {
  display: flex;
  gap: 10px;
}

.cart-btn {
  width: 35px;
  height: 35px;
  border: 2px solid #667eea;
  background: white;
  color: #667eea;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
}

.cart-btn:hover {
  background: #667eea;
  color: white;
}

.cart-total {
  display: flex;
  justify-content: space-between;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 10px;
  font-size: 1.5rem;
  font-weight: bold;
  color: #667eea;
  margin-top: 20px;
}

.customer-form input,
.customer-form select,
.customer-form textarea {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 1rem;
}

.customer-form input:focus,
.customer-form select:focus {
  border-color: #667eea;
  outline: none;
}

.checkbox-group {
  margin: 15px 0;
}

.checkbox-group label {
  display: flex;
  align-items: center;
  margin: 8px 0;
  cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
  width: auto;
  margin-right: 10px;
}

.order-btn {
  width: 100%;
  padding: 18px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.2rem;
  font-weight: bold;
  cursor: pointer;
  margin-top: 20px;
  transition: transform 0.2s;
}

.order-btn:hover {
  transform: scale(1.02);
}

/* Calendar */
.calendar-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.7);
  z-index: 999;
}

.calendar-popup {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: white;
  padding: 30px;
  border-radius: 15px;
  box-shadow: 0 10px 50px rgba(0,0,0,0.3);
  z-index: 1000;
  max-width: 400px;
  width: 90%;
}

.calendar-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.calendar-nav button {
  background: #667eea;
  color: white;
  border: none;
  padding: 8px 15px;
  border-radius: 5px;
  cursor: pointer;
}

.calendar-nav span {
  font-size: 1.2rem;
  font-weight: bold;
  color: #667eea;
}

#calendar table {
  width: 100%;
  border-collapse: collapse;
}

#calendar th,
#calendar td {
  padding: 10px;
  text-align: center;
  border: 1px solid #e0e0e0;
}

#calendar th {
  background: #667eea;
  color: white;
  font-weight: bold;
}

#calendar td {
  cursor: pointer;
  transition: background 0.2s;
}

#calendar td:hover:not(.disabled) {
  background: #e8eaf6;
}

#calendar td.disabled {
  color: #ccc;
  cursor: not-allowed;
  background: #f5f5f5;
}

#calendar td.weekend {
  background: #fff3e0;
}

.close-calendar {
  position: absolute;
  top: 10px;
  right: 15px;
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: #667eea;
}

/* Toast */
#toast {
  visibility: hidden;
  min-width: 300px;
  background: #667eea;
  color: white;
  text-align: center;
  border-radius: 10px;
  padding: 16px;
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  font-size: 1rem;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.3s, visibility 0.3s;
}

#toast.show {
  visibility: visible;
  opacity: 1;
}

/* Snowflakes */
.snowflake {
  position: fixed;
  top: -10vh;
  color: white;
  font-size: 20px;
  pointer-events: none;
  z-index: 10000;
  animation: fall linear infinite, sway ease-in-out infinite;
}

@keyframes fall {
  to { transform: translateY(120vh); }
}

@keyframes sway {
  0%, 100% { margin-left: 0; }
  50% { margin-left: 50px; }
}

/* Market Section */
.market-toggle {
  display: block;
  margin: 0 auto 30px;
  padding: 15px 40px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.2rem;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.market-toggle:hover {
  background: #764ba2;
}

.market-bakes {
  display: none;
}

.market-bakes.show {
  display: block;
}

.social-links {
  text-align: center;
  margin-top: 30px;
}

.social-icons {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-top: 15px;
}

.social-icons a {
  transition: transform 0.2s;
}

.social-icons a:hover {
  transform: scale(1.2);
}

/* Footer */
footer {
  background: white;
  text-align: center;
  padding: 40px 20px;
  margin-top: 60px;
  box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
}

footer img {
  max-width: 200px;
  margin-top: 20px;
  border-radius: 10px;
}

/* Special Request */
#special-request form input,
#special-request form textarea {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 1rem;
}

#special-request form button {
  width: 100%;
  padding: 15px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
}

/* New lead time section styles */
.leadtime-group {
  margin: 15px 0;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 10px;
  border: 1px solid #e0e0e0;
}

.leadtime-group p {
  margin-bottom: 8px;
  color: #444;
  font-weight: 600;
}

.leadtime-group label {
  margin-right: 15px;
  font-weight: 500;
}

.leadtime-note {
  margin-top: 8px;
  color: #b45309; /* amber */
  background: #fffbeb;
  border: 1px solid #fde68a;
  padding: 8px 10px;
  border-radius: 8px;
}

.site-footer {
  margin-top: 40px;
  padding: 30px 20px;
  background: rgba(247, 247, 248, 0.25);
  backdrop-filter: blur(15px);
  border-top: 1px solid rgba(234, 234, 234, 0.3);
  text-align: center;
  color: #333;
  border-radius: 25px 25px 0 0;
  position: relative;
}

.site-footer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
  background-size: 200% 100%;
  animation: gradientShift 3s ease-in-out infinite;
}

.site-footer nav {
  margin-bottom: 15px;
}

.site-footer nav a {
  margin: 0 15px;
  color: #0b66c3;
  text-decoration: none;
  transition: all 0.3s ease;
  padding: 8px 12px;
  border-radius: 8px;
}

.site-footer nav a:hover { 
  text-decoration: underline;
  background: rgba(11, 102, 195, 0.1);
  transform: translateY(-2px);
}

/* Account System Styles */
.account-section {
  max-width: 800px;
  margin: 40px auto;
  background: white;
  border-radius: 20px;
  padding: 30px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  display: none;
}

.account-tabs {
  display: flex;
  gap: 0;
  margin-bottom: 30px;
  border: 2px solid #667eea;
  border-radius: 10px;
  overflow: hidden;
}

.account-tab {
  flex: 1;
  padding: 15px;
  background: white;
  border: none;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s;
}

.account-tab.active {
  background: #667eea;
  color: white;
}

.account-content {
  display: none;
}

.account-content.active {
  display: block;
}

.auth-form input {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 1rem;
}

.auth-form button {
  width: 100%;
  padding: 15px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 10px;
  font-size: 1.1rem;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
}

.guest-checkout {
  text-align: center;
  margin: 20px 0;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 10px;
}

.guest-btn {
  background: #28a745;
  color: white;
  padding: 12px 30px;
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 10px;
}

.order-history {
  margin-top: 20px;
}

.order-item {
  background: #f8f9fa;
  padding: 15px;
  margin: 10px 0;
  border-radius: 10px;
  border-left: 4px solid #667eea;
}

.loyalty-points {
  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  margin: 20px 0;
  color: #333;
}

/* Wishlist Heart Icon */
.wishlist-heart {
  position: absolute;
  top: 15px;
  right: 15px;
  font-size: 24px;
  cursor: pointer;
  transition: all 0.3s;
  z-index: 100;
  color: #ccc;
}

.wishlist-heart:hover,
.wishlist-heart.loved {
  color: #ff6b6b;
  transform: scale(1.2);
}

.product-tile {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 15px;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
  position: relative;
  height: 350px;
}

/* Recommended Products */
.recommendations-section {
  background: #f8f9fa;
  padding: 30px;
  border-radius: 15px;
  margin: 30px 0;
}

.recommendations-section h3 {
  color: #667eea;
  margin-bottom: 20px;
  text-align: center;
}

.recommendations-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.recommendation-item {
  background: white;
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  transition: transform 0.3s;
}

.recommendation-item:hover {
  transform: translateY(-5px);
}

.recommendation-item img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  object-fit: cover;
  margin-bottom: 10px;
}

/* Loading Animations */
.loading-spinner {
  border: 4px solid #f3f3f3;
  border-top: 4px solid #667eea;
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 1s linear infinite;
  margin: 20px auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-product {
  height: 350px;
  border-radius: 15px;
  margin-bottom: 20px;
}

.skeleton-text {
  height: 20px;
  margin: 10px 0;
  border-radius: 4px;
}

.skeleton-title {
  height: 24px;
  width: 80%;
  margin: 15px auto;
  border-radius: 4px;
}

.fade-in {
  animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.slide-in {
  animation: slideIn 0.6s ease-out;
}

@keyframes slideIn {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

.zoom-in {
  animation: zoomIn 0.4s ease-out;
}

@keyframes zoomIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* Popular Items Dashboard */
.popular-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: linear-gradient(45deg, #FF6B6B, #FF8E8E);
  color: white;
  padding: 5px 10px;
  border-radius: 15px;
  font-size: 0.8rem;
  font-weight: bold;
  z-index: 10;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.trending-indicator {
  position: absolute;
  top: 10px;
  right: 50px;
  background: #FFD700;
  color: #333;
  padding: 3px 8px;
  border-radius: 10px;
  font-size: 0.7rem;
  font-weight: bold;
  z-index: 10;
}

.popular-dashboard {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 30px;
  border-radius: 20px;
  margin: 40px auto;
  max-width: 1200px;
  text-align: center;
}

.popular-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.stat-card {
  background: rgba(255, 255, 255, 0.1);
  padding: 20px;
  border-radius: 15px;
  backdrop-filter: blur(10px);
}

.stat-number {
  font-size: 2rem;
  font-weight: bold;
  color: #FFD700;
}

/* Countdown Timer */
.countdown-banner {
  background: linear-gradient(45deg, #FF6B35, #F7931E);
  color: white;
  padding: 20px;
  text-align: center;
  margin: 20px 0;
  border-radius: 15px;
  position: relative;
  overflow: hidden;
}

.countdown-banner::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

.countdown-timer {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 10px;
}

.countdown-unit {
  background: rgba(255, 255, 255, 0.2);
  padding: 10px 15px;
  border-radius: 10px;
  min-width: 60px;
}

.countdown-number {
  font-size: 1.5rem;
  font-weight: bold;
}

/* Sticky Cart Bar */
.sticky-cart {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(10px);
  border-bottom: 2px solid #667eea;
  padding: 15px 20px;
  z-index: 1000;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 20px rgba(0,0,0,0.1);
  transform: translateY(-100%);
  transition: transform 0.3s ease;
}

.sticky-cart.show {
  transform: translateY(0);
}

.cart-summary {
  display: flex;
  align-items: center;
  gap: 20px;
}

.cart-icon {
  font-size: 1.5rem;
  color: #667eea;
}

.cart-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.cart-count {
  font-weight: bold;
  color: #333;
}

.cart-total {
  color: #667eea;
  font-size: 0.9rem;
}

.mini-checkout-btn {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 25px;
  font-weight: bold;
  cursor: pointer;
  transition: transform 0.2s;
  text-decoration: none;
  display: inline-block;
}

.mini-checkout-btn:hover {
  transform: scale(1.05);
}

.mini-checkout-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.countdown-label {
  font-size: 0.8rem;
  opacity: 0.9;
}

.limited-offer {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  background: #FF4444;
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: bold;
  animation: bounce 1s infinite alternate;
}

@keyframes bounce {
  0% { transform: translateX(-50%) translateY(0); }
  100% { transform: translateX(-50%) translateY(-5px); }
}

@media (max-width: 768px) {
  /* Mobile App-Style Optimizations */
  body {
    padding-top: 140px; /* More space for sticky cart on mobile */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
  
  /* App-style header */
  header {
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(102, 126, 234, 0.2);
    box-shadow: 0 2px 20px rgba(0,0,0,0.1);
    margin-bottom: 15px;
    padding: 15px;
  }
  
  header h1 {
    font-size: 1.8rem;
    margin-bottom: 8px;
  }
  
  header p {
    font-size: 0.9rem;
    margin-bottom: 10px;
  }
  
  /* App-style navigation */
  nav {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    background: rgba(102, 126, 234, 0.1);
    border-radius: 20px;
    padding: 8px;
    margin-top: 10px;
    max-width: 100%;
    overflow-x: auto;
  }
  
  nav a {
    padding: 8px 10px;
    border-radius: 15px;
    font-size: 0.75rem;
    transition: all 0.3s ease;
    white-space: nowrap;
    min-width: fit-content;
    flex-shrink: 0;
  }
  
  nav a:hover, nav a.active {
    background: rgba(102, 126, 234, 0.2);
    transform: scale(1.05);
  }
  
  /* Account section mobile adjustments */
  .account-section {
    margin: 15px 10px;
    max-width: calc(100% - 20px);
    z-index: 1000;
    position: relative;
  }
  
  /* Mobile sections */
  section {
    margin: 15px 10px;
    padding: 25px 15px;
    border-radius: 20px;
  }
  
  section h2 {
    font-size: 1.8rem;
    margin-bottom: 20px;
  }
  
  /* Single column grid for mobile */
  .products-grid {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  .product-tile {
    height: 300px;
    border-radius: 18px;
  }
  
  /* Mobile hero */
  .hero {
    padding: 30px 15px;
  }
  
  .hero h2 {
    font-size: 1.8rem;
  }
  
  .hero p {
    font-size: 1.1rem;
  }
  
  .hero img {
    max-width: 250px;
  }
  
  /* Mobile sticky cart */
  .sticky-cart {
    padding: 12px 15px;
    border-bottom: 1px solid rgba(102, 126, 234, 0.2);
  }
  
  .cart-summary {
    gap: 15px;
  }
  
  .cart-icon {
    font-size: 1.3rem;
  }
  
  .cart-count, .cart-total {
    font-size: 0.9rem;
  }
  
  .mini-checkout-btn {
    padding: 8px 15px;
    font-size: 0.9rem;
  }
  
  /* Mobile-friendly buttons */
  .add-btn, .order-btn {
    padding: 12px;
    font-size: 1rem;
    border-radius: 12px;
  }
  
  /* Hide mouse hover effects on touch devices */
  .product-tile:hover {
    transform: none;
  }
  
  /* Touch-friendly tap effects */
  .product-tile:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .add-btn:active, .order-btn:active {
    transform: scale(0.95);
  }
}

/* Extra small screens - full app experience */
@media (max-width: 480px) {
  header h1 {
    font-size: 1.5rem;
  }
  
  nav a {
    font-size: 0.75rem;
    padding: 6px 8px;
  }
  
  section {
    margin: 10px 5px;
    padding: 20px 12px;
  }
  
  .hero {
    padding: 20px 10px;
  }
  
  .hero h2 {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body>

<!-- Sticky Cart Bar -->
<div class="sticky-cart" id="stickyCart">
  <div class="cart-summary">
    <div class="cart-icon">üõí</div>
    <div class="cart-info">
      <div class="cart-count" id="stickyCartCount">0 items</div>
      <div class="cart-total" id="stickyCartTotal">¬£0.00</div>
    </div>
  </div>
  <div>
    <a href="shop.html" class="mini-checkout-btn">Go to Shop</a>
  </div>
</div>

<header role="banner">
  <h1>üßÅ Cupcakes on the Avenue</h1>
  <p>Home of the exclusive Shortbread Delight & cosy bakes!</p>
  <nav role="navigation" aria-label="Main navigation">
    <a href="#about" aria-label="Learn about us">About</a>
    <a href="#festive" aria-label="View festive bakes">Festive Bakes</a>
    <a href="shop.html" aria-label="Browse our shop">Shop</a>
    <a href="#market" aria-label="Visit us at market">Market</a>
    <a href="account.html" id="accountLink" aria-label="Access your account">üë§ Account</a>
  </nav>
</header>

<!-- Account System -->
<div id="account" class="account-section">
  <div class="account-tabs">
    <button class="account-tab active" data-tab="login">Login</button>
    <button class="account-tab" data-tab="register">Register</button>
    <button class="account-tab" data-tab="profile">Profile</button>
  </div>

  <!-- Login Tab -->
  <div class="account-content active" id="login">
    <h3>Welcome Back!</h3>
    <form class="auth-form" id="loginForm">
      <input type="email" placeholder="Email Address" required>
      <input type="password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
    
    <div class="guest-checkout">
      <h4>Don't have an account?</h4>
      <p>No worries! You can still place orders as a guest.</p>
      <button class="guest-btn" id="guestCheckoutBtn">Continue as Guest</button>
    </div>
  </div>

  <!-- Register Tab -->
  <div class="account-content" id="register">
    <h3>Create Account</h3>
    <form class="auth-form" id="registerForm">
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email Address" required>
      <input type="tel" placeholder="Mobile Number" required>
      <input type="text" placeholder="Address" required>
      <input type="password" placeholder="Password" required>
      <input type="password" placeholder="Confirm Password" required>
      <button type="submit">Create Account</button>
    </form>
  </div>

  <!-- Profile Tab -->
  <div class="account-content" id="profile">
    <h3>My Account</h3>
    <div class="loyalty-points">
      <h4>üåü Loyalty Points</h4>
      <p style="font-size: 1.5rem; font-weight: bold;" id="loyaltyPoints">0 Points</p>
      <p>Earn 1 point for every ¬£1 spent ‚Ä¢ 100 points = ¬£5 off</p>
    </div>
    
    <div class="order-history">
      <h4>üìã Order History</h4>
      <div id="orderHistoryList">
        <p style="color: #999; text-align: center; padding: 20px;">No orders yet</p>
      </div>
    </div>
    
    <div style="margin-top: 20px;">
      <h4>üë• Referral Program</h4>
      <p>Share your referral code: <strong id="referralCode">COTA123</strong></p>
      <p>Get ¬£5 off when someone uses your code!</p>
    </div>
  </div>
</div>

<div class="hero">
  <img src="pictures/logo.png" alt="Cupcakes on the Avenue">
  <h2>Where every bake feels like home</h2>
  <p>Fresh cupcakes, biscuits, and celebration cakes baked with love!</p>
</div>

<!-- Halloween Special Countdown -->
<div class="countdown-banner" id="countdownBanner">
  <h3>üéÉ Halloween Special - 20% Off All Orders!</h3>
  <p>Limited time offer ends in:</p>
  <div class="countdown-timer" id="countdownTimer">
    <div class="countdown-unit">
      <div class="countdown-number" id="hours">00</div>
      <div class="countdown-label">Hours</div>
    </div>
    <div class="countdown-unit">
      <div class="countdown-number" id="minutes">00</div>
      <div class="countdown-label">Minutes</div>
    </div>
    <div class="countdown-unit">
      <div class="countdown-number" id="seconds">00</div>
      <div class="countdown-label">Seconds</div>
    </div>
  </div>
</div>

<section id="about">
  <h2>About Us</h2>
  <p style="text-align: center; font-size: 1.2rem; line-height: 1.8; max-width: 800px; margin: 0 auto; color: #666;">
    At Cupcakes on the Avenue, every bake feels like home. From our exclusive Shortbread Delight to cupcakes, biscuits, and cakes made for celebrating, everything is baked with love and a sprinkle of fun. Find us at Highworth Market every Saturday or order online for custom treats.
  </p>
</section>

<section id="festive">
  <h2>üéÑ Festive Bakes</h2>
  <div class="products-grid" style="justify-items: center;">
    
    <div class="product-tile">
      <div class="wishlist-heart" data-product="Christmas Cake with Royal Icing">‚ô°</div>
      <img src="pictures/marzipan.jpg" alt="Christmas Cake">
      <div class="product-overlay">
        <div>
          <div class="product-title">Christmas Cake with Royal Icing</div>
          <div class="product-description">Traditional Christmas cake with elegant royal icing. Available with or without alcohol.</div>
        </div>
        <div>
          <select class="product-select" data-id="festive-1">
            <option value="6 inch|30">6 inch - ¬£30</option>
            <option value="8 inch|40">8 inch - ¬£40</option>
          </select>
          <button class="add-btn" data-name="Christmas Cake - Royal Icing" data-id="festive-1">Add to Cart</button>
        </div>
      </div>
    </div>

    <div class="product-tile">
      <div class="wishlist-heart" data-product="Christmas Cake with Marzipan">‚ô°</div>
      <img src="pictures/fondant.jpg" alt="Marzipan Cake">
      <div class="product-overlay">
        <div>
          <div class="product-title">Christmas Cake with Marzipan</div>
          <div class="product-description">Rich fruit cake with marzipan and fondant icing. With or without alcohol.</div>
        </div>
        <div>
          <select class="product-select" data-id="festive-2">
            <option value="6 inch|30">6 inch - ¬£30</option>
            <option value="8 inch|40">8 inch - ¬£40</option>
          </select>
          <button class="add-btn" data-name="Christmas Cake - Marzipan" data-id="festive-2">Add to Cart</button>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- Popular Items Dashboard -->
<div class="popular-dashboard">
  <h2>üìä Popular This Week</h2>
  <p>See what everyone's loving right now!</p>
  
  <div class="popular-stats">
    <div class="stat-card">
      <div class="stat-number" id="totalOrders">47</div>
      <div>Orders This Week</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="popularItem">Shortbread Delight</div>
      <div>Most Popular Item</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="trendingItem">Cupcakes</div>
      <div>Trending Now</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="avgRating">5.0‚òÖ</div>
      <div>Average Rating</div>
    </div>
  </div>
</div>

<!-- Shop Call-to-Action -->
<section style="text-align: center; background: white; margin: 40px auto; max-width: 800px; padding: 60px 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
  <h2 style="color: #667eea; font-size: 2.5rem; margin-bottom: 20px;">üõçÔ∏è Browse Our Full Menu</h2>
  <p style="font-size: 1.3rem; color: #666; margin-bottom: 30px; line-height: 1.6;">
    Discover our complete range of artisan baked goods, from signature shortbreads to custom celebration cakes.
  </p>
  <a href="shop.html" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 40px; border-radius: 30px; text-decoration: none; font-size: 1.2rem; font-weight: bold; display: inline-block; transition: transform 0.3s; box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);">
    Visit Our Shop ‚Üí
  </a>
</section>

<div id="order" class="cart-section" style="display: none;">
  <div class="cart-header">
    <h2>üõí Your Cart</h2>
    <span id="itemCount">0 items</span>
  </div>

  <div class="cart-items" id="cartContents">
    <p style="text-align: center; color: #999; padding: 30px;">Your cart is empty</p>
  </div>

  <div class="cart-total">
    <span>Total:</span>
    <span id="cartTotal">¬£0.00</span>
  </div>

  <div class="customer-form">
    <h3 style="color: #667eea; margin: 25px 0 15px;">Customer Details</h3>
    <input type="text" id="customerName" placeholder="Full Name *" required>
    <input type="email" id="customerEmail" placeholder="Email Address *" required>
    <input type="tel" id="customerMobile" placeholder="Mobile Number *" required pattern="[0-9]{11}" title="Please enter an 11-digit UK mobile number">
    <input type="text" id="customerAddress" placeholder="Delivery Address *" required>
    <textarea id="customerNotes" rows="3" placeholder="Special Requests / Toppings (optional)"></textarea>

    <label for="deliveryMethod">Delivery method *</label>
    <select id="deliveryMethod" name="deliveryMethod" required>
      <option value="" disabled selected>Select delivery method</option>
      <option value="collect">Collect</option>
      <option value="collect_market">Collect from market</option>
      <option value="delivery">Delivery</option>
    </select>

    <input type="text" id="deliveryDate" placeholder="Click to select delivery date (min 7 days) *" readonly style="cursor: pointer;">

    <div class="leadtime-group">
      <p>Is your delivery date at least one week from today?</p>
      <label><input type="radio" name="leadTime" id="leadTimeYes" checked> Yes</label>
      <label><input type="radio" name="leadTime" id="leadTimeNo"> No</label>
      <p id="leadTimeWarning" class="leadtime-note" style="display:none;">
        Please call <a href="tel:07842817789">07842817789</a> to discuss if we can make it earlier.
      </p>
    </div>

    <div class="checkbox-group">
      <label>
        <input type="checkbox" id="privacyCheck" required>
        I agree to the <a href="privacy.html" target="_blank" rel="noopener">Privacy Policy</a> *
      </label>
      <label>
        <input type="checkbox" id="termsCheck" required>
        I agree to the <a href="terms.html" target="_blank" rel="noopener">Terms & Conditions</a> *
      </label>
    </div>

    <button class="order-btn" id="placeOrderBtn">Place Order & Pay</button>
    
    <!-- Recommended Products Section -->
    <div class="recommendations-section" id="recommendedProducts" style="display: none;">
      <h3>üõçÔ∏è Customers who bought this also bought</h3>
      <div class="recommendations-grid" id="recommendationsGrid">
        <!-- Recommendations will be populated here -->
      </div>
    </div>
  </div>
</div>

<!-- Recently Viewed Items Section -->
<section id="recently-viewed" style="display: none;">
  <h2>üëÄ Recently Viewed</h2>
  <div class="products-grid" id="recentlyViewedGrid">
    <!-- Recently viewed items will be populated here -->
  </div>
</section>

<!-- Move Market Section here, after cart -->
<section id="market">
  <h2>üé™ Highworth Market</h2>
  <div style="text-align: center; margin-bottom: 30px;">
    <p style="font-size: 1.3rem; font-weight: bold; color: #667eea;">Every Saturday ‚Ä¢ 8am - 2pm</p>
    <p style="font-size: 1.1rem; margin-top: 10px; color: #666;">Come visit us for fresh bakes, friendly chats, and our famous Shortbread Delight!</p>
  </div>

  <button class="market-toggle" id="marketToggle">See This Week's Bakes</button>

  <div class="market-bakes" id="marketBakes">
    <div class="products-grid">
      <div class="product-tile">
        <img src="pictures/thisweekshort.jpg" alt="Shortbread Delight">
        <div class="product-overlay">
          <div>
            <div class="product-title">Famous Shortbread Delight ‚≠ê</div>
            <div class="product-description">Our signature buttery shortbread - the star of the market!</div>
          </div>
        </div>
      </div>

      <div class="product-tile">
        <img src="pictures/christmascake.jpg" alt="Brownies">
        <div class="product-overlay">
          <div>
            <div class="product-title">Sliced Christmas cake</div>
            <div class="product-description">Rich and moist, perfect for the festive season.</div>
          </div>
        </div>
      </div>

      <div class="product-tile">
        <img src="pictures/caramelised.jpg" alt="Cupcakes">
        <div class="product-overlay">
          <div>
            <div class="product-title">Caramelised biscuit (Biscoff-style) brownies</div>
            <div class="product-description">Decadent brownies with a caramelised biscuit twist.</div>
          </div>
        </div>
      </div>

      <div class="product-tile">
        <img src="pictures/thisweekiced.jpg" alt="Biscuits">
        <div class="product-overlay">
          <div>
            <div class="product-title">Biscuit Selection</div>
            <div class="product-description">Handmade biscuits perfect for a cosy treat.</div>
          </div>
        </div>
      </div>

      <div class="product-tile">
        <img src="pictures/slicedvanilla.jpg" alt="New Market Bake">
        <div class="product-overlay">
          <div>
            <div class="product-title">Weekly Special</div>
            <div class="product-description">Vanilla sponge with apricot jam ‚Äî fondant or buttercream topping</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="social-links">
    <p style="font-size: 1.2rem; color: #667eea; font-weight: bold;">Follow us for weekly bakes & updates! üç™</p>
    <div class="social-icons">
      <a href="https://instagram.com/cupcakesontheavenue" target="_blank">
        <img src="pictures/instagram.png" alt="Instagram" width="45" height="45">
      </a>
      <a href="https://www.facebook.com/profile.php?id=61578246007533" target="_blank">
        <svg width="45" height="45" viewBox="0 0 24 24" fill="#1877F2">
          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
        </svg>
      </a>
      <a href="https://tiktok.com/@Cupcakesontheheaven" target="_blank">
        <img src="pictures/tiktok.png" alt="TikTok" width="45" height="45">
      </a>
    </div>
  </div>
</section>

<div class="calendar-overlay" id="calendarOverlay"></div>
<div class="calendar-popup" id="calendarPopup">
  <button class="close-calendar" id="closeCalendar">√ó</button>
  <div class="calendar-nav">
    <button id="prevMonth">‚óÄ</button>
    <span id="monthYear"></span>
    <button id="nextMonth">‚ñ∂</button>
  </div>
  <div id="calendar"></div>
</div>

<section id="special-request">
  <h2>üíå Special Request</h2>
  <p style="text-align: center; margin-bottom: 25px; color: #666; font-size: 1.1rem;">
    Have a custom order or special requirement? Let us know!
  </p>
  <form id="specialForm">
    <input type="text" id="srName" placeholder="Your Name *" required>
    <input type="email" id="srEmail" placeholder="Your Email *" required>
    <textarea id="srMessage" rows="5" placeholder="Describe your special request... *" required></textarea>
    <button type="submit">Send Request</button>
  </form>
</section>

<div id="toast"></div>

<footer class="site-footer">
  <nav>
    <a href="terms.html" target="_blank" rel="noopener">Terms & Conditions</a>
    <a href="privacy.html" target="_blank" rel="noopener">Privacy Policy</a>
    <a href="refunds.html" target="_blank" rel="noopener">Refunds & Cancellations</a>
    <a href="delivery.html" target="_blank" rel="noopener">Delivery & Collection</a>
  </nav>
  <p>¬© Cupcakes on the Avenue</p>
  <img src="pictures\food hygiene.jpg"" alt="Cupcake illustration" style="width: 80px; margin-top: 12px; opacity: 0.8;">
</footer>

<script src="https://js.stripe.com/v3"></script>
<script>
// ‚úÖ UPDATED: Use correct backend URL
const BACKEND_BASE = 'https://sumup-backend.vercel.app';
const WEBHOOK_URL = 'https://discord.com/api/webhooks/1426192909044023297/Ilgqgr8p7buI95ai-zssfphPLzQlNBBZf6PY31BhVuptPd-ZyccSq5kAQJPoBkUt4PHK';

let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();
let blockedDates = JSON.parse(localStorage.getItem('blockedDates') || '[]');

// Initialize on page load
document.addEventListener('DOMContentLoaded', function() {
  updateCart();
  initializeCalendar();
  initializeEventListeners();
  applySeason();
  startCountdown();
  updateStickyCart();
  loadRecentlyViewed();
});

function initializeEventListeners() {
  // Add to cart buttons
  document.querySelectorAll('.add-btn').forEach(btn => {
    btn.addEventListener('click', function() {
      const selectEl = document.querySelector(`.product-select[data-id="${this.dataset.id}"]`);
      if (!selectEl || !selectEl.value) {
        showToast('‚ö†Ô∏è Please select a size first');
        return;
      }
      
      const [variant, price] = selectEl.value.split('|');
      const productName = this.dataset.name;
      const fullName = `${productName} (${variant})`;
      
      addToCart(fullName, parseFloat(price));
      if (typeof trackAddToCart === 'function') {
        trackAddToCart(fullName, parseFloat(price));
      }
    });
  });

  // Calendar events
  const deliveryDateEl = document.getElementById('deliveryDate');
  if (deliveryDateEl) {
    deliveryDateEl.addEventListener('click', openCalendar);
  }
  
  const closeCalendarEl = document.getElementById('closeCalendar');
  if (closeCalendarEl) {
    closeCalendarEl.addEventListener('click', closeCalendar);
  }
  
  const calendarOverlayEl = document.getElementById('calendarOverlay');
  if (calendarOverlayEl) {
    calendarOverlayEl.addEventListener('click', closeCalendar);
  }
  
  const prevMonthEl = document.getElementById('prevMonth');
  if (prevMonthEl) {
    prevMonthEl.addEventListener('click', () => changeMonth(-1));
  }
  
  const nextMonthEl = document.getElementById('nextMonth');
  if (nextMonthEl) {
    nextMonthEl.addEventListener('click', () => changeMonth(1));
  }

  // Lead time warning
  const leadTimeNoEl = document.getElementById('leadTimeNo');
  if (leadTimeNoEl) {
    leadTimeNoEl.addEventListener('change', function() {
      const warningEl = document.getElementById('leadTimeWarning');
      if (warningEl) {
        warningEl.style.display = this.checked ? 'block' : 'none';
      }
    });
  }

  const leadTimeYesEl = document.getElementById('leadTimeYes');
  if (leadTimeYesEl) {
    leadTimeYesEl.addEventListener('change', function() {
      const warningEl = document.getElementById('leadTimeWarning');
      if (warningEl) {
        warningEl.style.display = 'none';
      }
    });
  }

  // Market toggle
  const marketToggleEl = document.getElementById('marketToggle');
  if (marketToggleEl) {
    marketToggleEl.addEventListener('click', function() {
      const bakes = document.getElementById('marketBakes');
      if (bakes) {
        bakes.classList.toggle('show');
        this.textContent = bakes.classList.contains('show') ? 'Hide Market Bakes' : 'See This Week\'s Bakes';
      }
    });
  }

  // Special request form
  const specialFormEl = document.getElementById('specialForm');
  if (specialFormEl) {
    specialFormEl.addEventListener('submit', function(e) {
      e.preventDefault();
      const nameEl = document.getElementById('srName');
      const emailEl = document.getElementById('srEmail');
      const messageEl = document.getElementById('srMessage');
      
      if (nameEl && emailEl && messageEl) {
       
        const name = nameEl.value;
        const email = emailEl.value;
        const message = messageEl.value;
        
        // Store special request locally
        const requests = JSON.parse(localStorage.getItem('specialRequests') || '[]');
        requests.push({
          id: Date.now(),
          name,
          email,
          message,
          date: new Date().toISOString(),
          status: 'pending'
        });
        localStorage.setItem('specialRequests', JSON.stringify(requests));
        
        showToast('‚úÖ Request sent! We\'ll get back to you soon.');
        this.reset();
      }
    });
  }

  // Place Order Button - THE MAIN FIX
  const placeOrderBtn = document.getElementById('placeOrderBtn');
  if (placeOrderBtn) {
    placeOrderBtn.addEventListener('click', handlePlaceOrder);
  }
}

function addToCart(name, price) {
  const existing = cart.find(i => i.name === name);
  if (existing) {
    existing.quantity++;
  } else {
    cart.push({ name, price, quantity: 1 });
  }
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCart();
  updateStickyCart();
  showToast(`‚úÖ ${name} added to cart!`);
}

function updateCart() {
  const contents = document.getElementById('cartContents');
  const itemCountEl = document.getElementById('itemCount');
  const cartTotalEl = document.getElementById('cartTotal');
  const orderEl = document.getElementById('order');
  
  if (!contents || !itemCountEl || !cartTotalEl || !orderEl) return;
  
  const total = cart.reduce((sum, i) => sum + (i.price * i.quantity), 0);
  
  itemCountEl.textContent = `${cart.length} items`;
  cartTotalEl.textContent = `¬£${total.toFixed(2)}`;
  
  if (cart.length === 0) {
    contents.innerHTML = '<p style="text-align: center; color: #999; padding: 30px;">Your cart is empty</p>';
    orderEl.style.display = 'none';
  } else {
    orderEl.style.display = 'block';
    contents.innerHTML = `<ul>${cart.map((item, idx) => `
      <li>
        <div>
          <strong>${item.name}</strong><br>
          <span style="color: #666;">¬£${item.price.toFixed(2)} √ó ${item.quantity} = ¬£${(item.price * item.quantity).toFixed(2)}</span>
        </div>
        <div class="cart-controls">
          <button class="cart-btn" onclick="changeQuantity(${idx}, -1)">-</button>
          <span style="min-width: 30px; text-align: center;">${item.quantity}</span>
          <button class="cart-btn" onclick="changeQuantity(${idx}, 1)">+</button>
          <button class="cart-btn" onclick="removeFromCart(${idx})" style="color: #dc3545; border-color: #dc3545;">√ó</button>
        </div>
      </li>
    `).join('')}</ul>`;
  }
}

function changeQuantity(index, delta) {
  if (cart[index]) {
    cart[index].quantity += delta;
    if (cart[index].quantity <= 0) {
      cart.splice(index, 1);
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
    updateStickyCart();
  }
}

function removeFromCart(index) {
  cart.splice(index, 1);
  localStorage.setItem('cart', JSON.stringify(cart));
  updateCart();
  updateStickyCart();
}

function updateStickyCart() {
  const stickyCart = document.getElementById('stickyCart');
  const countEl = document.getElementById('stickyCartCount');
  const totalEl = document.getElementById('stickyCartTotal');
  
  if (!stickyCart || !countEl || !totalEl) return;
  
  const total = cart.reduce((sum, i) => sum + (i.price * i.quantity), 0);
  const itemCount = cart.reduce((sum, i) => sum + i.quantity, 0);
  
  countEl.textContent = `${itemCount} item${itemCount !== 1 ? 's' : ''}`;
  totalEl.textContent = `¬£${total.toFixed(2)}`;
  
  if (itemCount > 0) {
    stickyCart.classList.add('show');
  } else {
    stickyCart.classList.remove('show');
  }
}

// ‚úÖ MAIN CHECKOUT FUNCTION - Email sending removed
async function handlePlaceOrder() {
  console.log('üöÄ Starting order process...');
  
  // Get form elements
  const nameEl = document.getElementById('customerName');
  const emailEl = document.getElementById('customerEmail');
  const mobileEl = document.getElementById('customerMobile');
  const addressEl = document.getElementById('customerAddress');
  const notesEl = document.getElementById('customerNotes');
  const deliveryEl = document.getElementById('deliveryMethod');
  const dateEl = document.getElementById('deliveryDate');
  const privacyEl = document.getElementById('privacyCheck');
  const termsEl = document.getElementById('termsCheck');
  const orderBtn = document.getElementById('placeOrderBtn');

  if (!nameEl || !emailEl || !mobileEl || !addressEl || !deliveryEl || !dateEl || !privacyEl || !termsEl || !orderBtn) {
    showToast('‚ö†Ô∏è Form elements not found. Please refresh the page.');
    return;
  }

  // Get values
  const name = nameEl.value.trim();
  const email = emailEl.value.trim();
  const mobile = mobileEl.value.trim();
  const address = addressEl.value.trim();
  const delivery = deliveryEl.value;
  const date = dateEl.value;
  const notes = notesEl.value.trim();
  const privacy = privacyEl.checked;
  const terms = termsEl.checked;

  // Validation
  if (!name || !email || !mobile || !address || !delivery || !date) {
    showToast('‚ö†Ô∏è Please fill all required fields');
    return;
  }

  if (!/^[0-9]{11}$/.test(mobile)) {
    showToast('‚ö†Ô∏è Please enter a valid 11-digit UK mobile number');
    return;
  }

  if (!privacy || !terms) {
    showToast('‚ö†Ô∏è Please accept Privacy Policy and Terms');
    return;
  }

  if (cart.length === 0) {
    showToast('‚ö†Ô∏è Your cart is empty');
    return;
  }

  // Disable button and show processing
  orderBtn.disabled = true;
  orderBtn.textContent = 'Processing Order...';

  try {
    // Calculate total and create order number
    const total = cart.reduce((s, i) => s + i.price * i.quantity, 0);
    const orderNumber = 'ORDER-' + Date.now();
    
    // Get delivery label
    const deliveryLabel = delivery === 'collect' ? 'Collect' 
      : delivery === 'collect_market' ? 'Market Collection'
      : delivery === 'delivery' ? 'Home Delivery' : delivery;

    // Create cart snapshot BEFORE clearing
    const cartSnapshot = [...cart];

    console.log('üì¶ Order details:', {
      orderNumber,
      customer: name,
      total: total.toFixed(2),
      items: cartSnapshot.length
    });

    // Discord message
    const discordMessage = `üßÅ **NEW ORDER**

**Order Number:** ${orderNumber}
**Customer:** ${name}
**Email:** ${email}
**Mobile:** ${mobile}
**Address:** ${address}
**Delivery:** ${deliveryLabel}
**Date:** ${date}

**Items:**
${cartSnapshot.map(i => `‚Ä¢ ${i.name} x${i.quantity} - ¬£${(i.price * i.quantity).toFixed(2)}`).join('\n')}

**TOTAL: ¬£${total.toFixed(2)}**
**Notes:** ${notes || 'None'}`;

    // Step 1: Send to Discord (non-blocking)
    console.log('üöÄ Step 1: Sending to Discord...');
    try {
      const discordResponse = await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: discordMessage })
      });
      
      if (discordResponse.ok) {
        console.log('‚úÖ Discord notification sent');
        showToast('‚úÖ Order sent to Discord!');
      } else {
        console.warn('‚ö†Ô∏è Discord failed:', discordResponse.status);
      }
    } catch (discordError) {
      console.warn('‚ö†Ô∏è Discord error (continuing):', discordError.message);
    }

    // Step 2: Save order locally
    console.log('üíæ Step 2: Saving order locally...');
    const orders = JSON.parse(localStorage.getItem('shopOrders') || '[]');
    const orderData = {
      id: orderNumber,
      customerName: name,
      customerEmail: email,
      customerMobile: mobile,
      items: cartSnapshot.map(i => ({ name: i.name, quantity: i.quantity, price: i.price })),
      total,
      status: 'pending',
      deliveryMethod: deliveryLabel,
      deliveryDate: date,
      orderDate: new Date().toISOString(),
      address,
      notes: notes || ''
    };
    orders.push(orderData);
    localStorage.setItem('shopOrders', JSON.stringify(orders));
    console.log('‚úÖ Order saved locally');

    // Step 3: Save customer data
    const customers = JSON.parse(localStorage.getItem('webCustomers') || '[]');
    const existingCustomer = customers.find(c => c.email.toLowerCase() === email.toLowerCase());
    
    if (!existingCustomer) {
      customers.push({
        name, email, phone: mobile,
        joinDate: new Date().toISOString().split('T')[0],
        source: 'website',
        totalOrders: 1,
        totalSpent: total
      });
      localStorage.setItem('webCustomers', JSON.stringify(customers));
      console.log('‚úÖ New customer added');
    } else {
      existingCustomer.totalOrders = (existingCustomer.totalOrders || 0) + 1;
      existingCustomer.totalSpent = (existingCustomer.totalSpent || 0) + total;
      localStorage.setItem('webCustomers', JSON.stringify(customers));
      console.log('‚úÖ Customer updated');
    }

    // Step 4: Track analytics
    if (typeof trackPurchase === 'function') {
      trackPurchase(total, cartSnapshot);
    }

    // Step 5: Clear cart and redirect
    console.log('üõí Step 4: Clearing cart...');
    cart = [];
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCart();
    updateStickyCart();

    // Step 6: Redirect to payment
    console.log('üí≥ Step 5: Redirecting to payment...');
    orderBtn.textContent = 'Redirecting to Payment...';
    
    // ‚úÖ USING CORRECT BACKEND URL
    const checkoutUrl = `${BACKEND_BASE}/api/checkout?total=${total.toFixed(2)}&reference=${orderNumber}`;
    console.log('üîó Payment URL:', checkoutUrl);
    
    // Add small delay for user feedback
    setTimeout(() => {
      console.log('üîÑ Redirecting now...');
      window.location.href = checkoutUrl;
    }, 1500);

  } catch (error) {
    console.error('‚ùå Order processing failed:', error);
    
    // Restore cart if it was cleared
    if (cart.length === 0 && typeof cartSnapshot !== 'undefined') {
      cart = cartSnapshot;
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCart();
      updateStickyCart();
    }
    
    showToast('‚ö†Ô∏è Order failed. Please try again or call 07842817789');
    orderBtn.disabled = false;
    orderBtn.textContent = 'Place Order & Pay';
  }
}

// Calendar functions
function openCalendar() {
  const overlay = document.getElementById('calendarOverlay');
  const popup = document.getElementById('calendarPopup');
  if (overlay && popup) {
    overlay.style.display = 'block';
    popup.style.display = 'block';
    renderCalendar();
  }
}

function closeCalendar() {
  const overlay = document.getElementById('calendarOverlay');
  const popup = document.getElementById('calendarPopup');
  if (overlay && popup) {
    overlay.style.display = 'none';
    popup.style.display = 'none';
  }
}

function changeMonth(delta) {
  currentMonth += delta;
  if (currentMonth > 11) {
    currentMonth = 0;
    currentYear++;
  } else if (currentMonth < 0) {
    currentMonth = 11;
    currentYear--;
  }
  renderCalendar();
}

function renderCalendar() {
  const calendarEl = document.getElementById('calendar');
  const monthYearEl = document.getElementById('monthYear');
  
  if (!calendarEl || !monthYearEl) return;
  
  const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
  monthYearEl.textContent = `${monthNames[currentMonth]} ${currentYear}`;
  
  const firstDay = new Date(currentYear, currentMonth, 1).getDay();
  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  
  let html = '<table><thead><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr></thead><tbody><tr>';
  
  const today = new Date();
  const minDate = new Date(today);
  minDate.setDate(today.getDate() + 7);
  
  for (let i = 0; i < firstDay; i++) {
    html += '<td></td>';
  }
  
  for (let day = 1; day <= daysInMonth; day++) {
    const date = new Date(currentYear, currentMonth, day);
    const dateStr = date.toISOString().split('T')[0];
    const dayOfWeek = date.getDay();
    const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;
    const isBlocked = blockedDates.includes(dateStr);
    const isTooSoon = date < minDate;
    const disabled = isBlocked || isTooSoon;
    
    let className = '';
    if (disabled) className = 'disabled';
    else if (isWeekend) className = 'weekend';
    
    html += `<td class="${className}" ${!disabled ? `onclick="selectDate('${dateStr}')"` : ''}>${day}</td>`;
    
    if ((firstDay + day) % 7 === 0) {
      html += '</tr><tr>';
    }
  }
  
  html += '</tr></tbody></table>';
  calendarEl.innerHTML = html;
}

function selectDate(dateStr) {
  const dateEl = document.getElementById('deliveryDate');
  if (dateEl) {
    dateEl.value = dateStr;
    closeCalendar();
  }
}

function showToast(message) {
  const toast = document.getElementById('toast');
  if (toast) {
    toast.textContent = message;
    toast.classList.add('show');
    setTimeout(() => {
      toast.classList.remove('show');
    }, 3000);
  }
}

// Seasonal theme
function applySeason() {
  const month = new Date().getMonth();
  let season = '';
  
  if (month >= 2 && month <= 4) season = 'spring';
  else if (month >= 5 && month <= 7) season = 'summer';
  else if (month >= 8 && month <= 10) season = 'autumn';
  else season = 'winter';
  
  document.body.className = season;
}

// Countdown timer
function startCountdown() {
  const banner = document.getElementById('countdownBanner');
  if (!banner) return;
  
  const endDate = new Date('2024-12-01T00:00:00'); // Updated end date
  
  const timer = setInterval(() => {
    const now = new Date();
    const diff = endDate - now;
    
    if (diff <= 0) {
      banner.style.display = 'none';
      clearInterval(timer);
      return;
    }
    
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((diff % (1000 * 60)) / 1000);
    
    const hoursEl = document.getElementById('hours');
    const minutesEl = document.getElementById('minutes');
    const secondsEl = document.getElementById('seconds');
    
    if (hoursEl) hoursEl.textContent = String(hours).padStart(2, '0');
    if (minutesEl) minutesEl.textContent = String(minutes).padStart(2, '0');
    if (secondsEl) secondsEl.textContent = String(seconds).padStart(2, '0');
  }, 1000);
}

function loadRecentlyViewed() {
  // Placeholder for recently viewed items functionality
  console.log('üìñ Recently viewed items loaded');
}

// Make functions globally accessible
window.changeQuantity = changeQuantity;
window.removeFromCart = removeFromCart;
window.selectDate = selectDate;
</script>

<!-- ‚úÖ ENHANCED Fallback Email System -->
<script>
  function sendFallbackEmailNotification(emailType, data) {
    console.log(`üìß Storing ${emailType} email for fallback processing...`);
    
    // Store email request for admin processing
    let pendingEmails = JSON.parse(localStorage.getItem('pendingEmails') || '[]');
    
    const emailRequest = {
      id: Date.now(),
      type: emailType,
      data: data,
      timestamp: new Date().toISOString(),
      status: 'pending',
      preview: generateEmailContent(emailType, data)
    };
    
    pendingEmails.push(emailRequest);
    localStorage.setItem('pendingEmails', JSON.stringify(pendingEmails));
    
    console.log('‚úÖ Email request stored for processing');
    
    // Show user notification
    if (emailType === 'orderConfirmation') {
      showToast('üìß Order confirmation will be sent via email backup system');
    }
  }

  function generateEmailContent(emailType, data) {
    switch(emailType) {
      case 'welcome':
        return {
          subject: 'Welcome to Cupcakes on the Avenue! üßÅ',
          body: `Dear ${data.name},\n\nWelcome to Cupcakes on the Avenue! We're delighted to have you join our family of cake lovers.\n\nYou'll be the first to know about our fresh bakes, seasonal specialties, and exciting new flavors.\n\nThank you for choosing Cupcakes on the Avenue!\n\nWith sweet regards,\nCupcakes on the Avenue Team`
        };
      
      case 'orderConfirmation':
        const items = data.orderData.items.map(item => 
          `${item.name} x${item.quantity} - ¬£${item.price}`
        ).join('\n');
        
        return {
          subject: `Order Confirmation - ${data.orderData.orderNumber} üßÅ`,
          body: `Dear ${data.name},\n\nThank you for your order! Here are your order details:\n\nOrder Number: ${data.orderData.orderNumber}\n\nItems:\n${items}\n\nTotal: ${data.orderData.total}\nDelivery: ${data.orderData.deliveryInfo}\n\nWe'll update you when your order is ready!\n\nBest regards,\nCupcakes on the Avenue\nPhone: 07842817789`
        };
      
      default:
        return { subject: 'Cupcakes on the Avenue Notification', body: 'Email content will be generated.' };
    }
  }
</script>